# 8주차 복습

다중 선택: 매주 세션

### ORM

데이터베이스 테이블과 자바 객체를 자동으로 연결해주는 기술

⇒ 객체 지향 프로그램(참조이용)과 관계형 데이터베이스(외래키이용) 사이의 관계 표현 방식이 다르기 때문에 필요한 기술

### 연관 관계 정의 기준

<aside>
1️⃣

### 방향에 따른 관계

관계형 데이터베이스(RDB) : 관계에 방향성 X

→ 테이블 간 ?

객체 지향 프로그래밍(OOP) : 관계에 방향성 O

어떤 클래스가 다른 클래스를 참조하려면, 그 클래스 안에 참조용 필드가 있어야하기 때문

단방향 / 양방향으로 나뉜다

<aside>
📎

### 단방향 연관 관계

참조용 필드를 한쪽만 가지고 있는 구조

```java
class User {  // User 클래스만 참조용(Post형 변수)를 가짐

  Post post;  // User -> Post
}

class Post {

  int a;
}
```

### 양방향 연관 관계

참조용 필드를 양쪽 모두 가지고 있는 구조로 연관 관계 주인을 지정해야한다

```java
class User {

  List<Post> posts;  // User → Post
}

class Post {

  User author;       // Post → User
}
```

</aside>

<aside>
📎

### 연관 관계 주인 지정

엔티티를 양방향 연관 관계로 설정 시 객체 지향에서의 참조는 두개 BUT 관계형 데이터베이스에서 외래키는 하나이기 때문에 외래키를 관리할 연관관계의 주인을 지정해야 함

### 연관 관계 주인의 경우

- 외래키를 관리 → 외래키가 있는 테이블이 주인이 됨
- mappedBy 사용 X
- 다대일 관계에서는 많은 쪽이 주인이 됨

### 연관 관계의 주인이 아닌 경우

- 외래키 관리 X, 읽기만 가능
- mappedBy 속성을 이용해서 매핑

</aside>

<aside>
📎

### 다중성의 종류

### 1:N / N:1

- 하나가 여러개, 여러개가 하나를 참조
- @OneToMany, @ManyToOne 이용

### 1:1

- 하나가 하나와 연결
- @OneToOne 이용

### N:M

- 여러개가 여러개를 참조
- @ManyToMany 이용
- 객체 지향 프로그래밍에서는 다대다 관계를 표현 가능하지만 관계형 데이터베이스에서는 직접적으로 다대다 관계를 표현하지 못하기 때문에 중간 매핑 테이블을 만들어서 매핑해야 함

</aside>

</aside>

<aside>
📎

### ERD

테이블 간의 연관관계를 그림으로 표현한 것

### 관계 차수

다중성을 표현하는 방식

- (OneTo) One or Many
- (OneTo) One Only
- (OneTo) Many
- (OneTo) One

### 참여도

관계 필수 참여인지 선택 참여인지 나타내는 방식

- (OneTo) Zero or One or Many
- (OneTo) Zero or Many
- (OneTo) Zero or One

### 식별 관계

식별자 관계 : 부모테이블의 기본 키를 자식테이블에서 기본키로 사용하는 경우

비식별관계 :  부모 테이블의 기본키를 자신의 기본키로 사용하지 않고 외래키로 사용하는 관계

</aside>